<!DOCTYPE html>
<html>
 <head>
   <meta charset="UTF-8">
   <title>a very occasional diary @ Nikita Danilov | BSD VM scanner</title>
   <link rel="stylesheet" href="style.css">
   <style></style>
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-WEM34DWDR2"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-WEM34DWDR2');
</script>
   
 </head>
 <body>
   <a name="bsd-vm"></a><div class="column"><header>BSD VM scanner</header>
<a name="bsd-vm-00000"></a><p>BSD vm analyzes object reference counter in page scanner (<code class="inline">vm_pageout.c:vm_pageout_scan()</code>):</p>
<a name="bsd-vm-00001"></a><pre><code>/*
 * If the object is not being used, we ignore previous 
 * references.
 */
if (m-&gt;object-&gt;ref_count == 0) {
        vm_page_flag_clear(m, PG_REFERENCED);
        pmap_clear_reference(m);
}
....
/*
 * Only if an object is currently being used, do we use the
 * page activation count stats.
 */
if (actcount &amp;&amp; (m-&gt;object-&gt;ref_count != 0)) {
        vm_pageq_requeue(m);
}
....</code></pre><footer><a href="aodt.html#aodt">&lt;</a>&nbsp;<a href="series_blog_compact_reverse.html">blog</a>&nbsp;<a href="catalan.html#catalan">&gt;</a>&nbsp;&nbsp;&nbsp;<a href="concurrency-and-recovery.html#concurrency-and-recovery">&lt;</a>&nbsp;<a href="series_timeline_compact_reverse.html">timeline</a>&nbsp;<a href="xnu-vm.html#xnu-vm">&gt;</a>&nbsp;&nbsp;&nbsp;</footer></div>
 </body>
</html>
